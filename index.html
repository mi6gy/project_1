<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />

  <!-- links -->
  <!-- <link rel="icon" type="image/png" href="assets/img/favicon.png" /> -->
  <!-- <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet"> -->
  <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" /> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/style.css" />

  <title>Read Your Movie</title>
</head>

<body>

  <div class="container">

    <!-- Jumbotron for Title -->
    <div class="jumbotron" style="background-color: #20315A ; color: white;">
      <h1 class="text-center">
        <strong>
          <i class="fa fa-newspaper-o"></i> Read Your Movie</strong>

      </h1>
    </div>

    <!-- Search field -->
    <form id="contentForm">
      <label for="contentInput">Search for a movie</label>
      <input type="text" id="contentInput"><br>

      <!-- This button will trigger our AJAX call -->
      <input id="findContent" type="submit" value="Movie Search">
    </form>

    <!-- We'll be dumping our JSON contents in here -->
    <div id="contentView"></div>
    <div id="bookView"></div>

    <body>

      <br>
      <br>

      <!-- Row for Searching -->
      <div class="row">

        <!-- Movie card -->
        <div class="col s6 m6 l6 ">
          <div class="card">
            <div class="card-image card-movies">
              
              <span class="card-title"></span>
              <h1 id="movie-title"></h1>
            </div>
            <div class="card-content">
              <img id="movie-image" src="">
              <div class="movieRating">
                <p id="movie-rating"></p>
              </div>
              <!-- $("img").attr("src", imgURL); -->
              <!-- movieDiv.append(image); -->

              <div class="moviePlot">
                <p id="movie-plot"></p>
              </div>
            </div>
            <div class="card-action">
              <a id="movie-link" href="">Watch this Movie!</a>
            </div>
          </div>
        </div>

        <!-- Book card -->
        <div class="col s6 m6 l6 ">
          <div class="card">
            <div class="card-image">
              
              <span class="card-title"></span>
                <h1 id="book-title"></h1>
              
            </div>
            <div class="card-content">
              <img id="book-image" src="">
              <div class="googleRating">
                <p id="book-rating"></p>
              </div>

              <div class="googlePlot">
                <p id="book-plot"></p>
              </div>
            </div>
            <div class="card-action">
              <a id="book-link" href="">Read this Book!</a>
            </div>
          </div>
        </div>
      </div>




  </div>

  <!-- scripts -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script type="text/javascript">

    $("#findContent").on("click", function (event) {
      event.preventDefault()
      var book = $("#contentInput").val();
      var queryBooksURL = "https://www.googleapis.com/books/v1/volumes?q=" + book + "&key=AIzaSyBfde9KgHwbNNBEW_J011ZGwrHD0G0O1go"

      $.ajax({
        url: queryBooksURL,
        method: "GET"
      }).then(function (googleResponse) {
        console.log(googleResponse);
        // $("#bookView").html(googleResponse.items[0].volumeInfo.authors);
        var queryMoviesURL = "https://www.omdbapi.com/?t=" + book + "&apikey=101156dc";

        $.ajax({
          url: queryMoviesURL,
          method: "GET"
        }).then(function (movieResponse) {
          console.log(movieResponse);
          // $("#contentView").text(movieResponse.Title);

          if (googleResponse.items.length > 0 && movieResponse.Response != "False") {
            // var bookImgURL = response.items[0].imageLinks.thumbnail;
            // $("#bookName").text(googleResponse.items[0].volumeInfo.title);
            // $("#card-title").html(googleResponse.items[0].volumeInfo.authors);
            $("#movie-title").text(movieResponse.Title);
            $("#movie-plot").text(movieResponse.Plot);
            $("#movie-image").attr("src", movieResponse.Poster);
            $("#movie-link").attr("href", "https://play.google.com/store/search?q=" + movieResponse.Title + "&c=movies")
            $("#book-title").text(googleResponse.items[0].volumeInfo.title);
            $("#book-image").attr("src", googleResponse.items[0].volumeInfo.imageLinks.thumbnail);
            $("#book-plot").text(googleResponse.items[0].volumeInfo.description);
            $("#book-link").attr("href", "https://play.google.com/store/search?q=" + googleResponse.items[0].volumeInfo.title + "&c=books")


          
          }
          else {
            $("#bookView").html("<p>Movie not found</p>");
          }
        });
      }).catch(function (err) {
        console.log(err);
      })
    });


  </script>

</body>

</html>
